\section{Introduction}\label{sec:intro}

There is a large and vibrant ecosystem of open-source mathematical software systems. 
These range from calculators, which are only capable of performing simple computations, via mathematical databases, which curate collections of a mathematical objects, to powerful modeling tools and computer algebra systems (CAS).

Most of these systems are very specific -- they focus on one or very few aspects of mathematics.
For example, among databases, the ``Online Encyclopedia of Integer Sequences'' (OEIS) focuses
on sequences over $\mathbb{Z}$ and their properties, and the ``L-Functions and Modular Forms
Database'' (\LMFDB)~\cite{Cremona:LMFDB16,lmfdb:on} on objects in number theory pertaining to
Langland's program. Among CAS, \GAP~\cite{GAP:on} excels at discrete algebra with a focus on group theory,
\Singular~\cite{singular:on} focuses on polynomial computations with special emphasis on
commutative and non-commutative algebra, algebraic geometry, and singularity theory, and
\Sage~\cite{SageMath:on} aims to be a general purpose software for computational pure
mathematics by loosely integrating many systems including the aforementioned ones.

For a mathematician, however, (a user, which we call Jane) the systems themselves are not relevant.
Instead, she only cares about being able to solve problems. 
Because it is typically not possible to solve a mathematical problem using only a single program, Jane has to work with multiple systems and combine the results to reach a solution. 
Currently there is very little tool support for this practice, so Jane has to isolate sub-problems that the respective systems are amenable to, formulate them in the respective input language and collect intermediate results and reformulate them for the next system --- a tedious and error-prone process at best, a significant impediment to scientific progress at worst.
Solutions for some situations certainly exist, which can help get Jane unstuck, but these are ad-hoc and only for specific often-used system combinations. 
Moreover, each of these ad hoc solutions requires a lot of maintenance and scales badly to multi-system integration. 

The OpenDreamKit project was initiated to tackle these problems systematically and build virtual research environments (VRE) on top of the existing systems.
To build a VRE from individual systems, we need a joint user interface -- the OpenDreamKit project adopts Jupyter~\cite{jupyter-project:on} and active
documents~\cite{KohDavGin:psewads11} -- and an interoperability layer that allows passing problems and results between the disparate systems. 
For the latter, it proposes the Math-in-the-Middle (MitM~\cite{DehKohKon:iop16}) paradigm, an interoperability framework based on a central, system-independent ontology of mathematical knowledge.

In this paper we instantiate the MitM paradigm in a concrete case study using a distributed computation involving \GAP, \Sage, and \Singular.
We will use the following running example from computational group theory: Jane works in the polynomial ring $R=\mathbb{Z}[X_1,\ldots,X_4]$.
She wants to compute the orbit $O=Orbit(D_8,R,X_1+X_2)\subseteq R$ of the polynomial $X_1+X_2\in R$ under the action of the dihedral group\footnote{Incidentally, this group is called $D_4$ in \Sage but $D_8$ in \GAP due to differing conventions in different mathematical communities -- a small example of the obstacles to system interoperability that MitM tackles.} $D_8$, and then compute a Gr\"obner base $G=Groebner(Ideal(O))\subseteq R$ for the ideal generated by $O$.
Jane is a \Sage user and wants to receive the result in \Sage, but she wants to use \GAP's orbit algorithm and \Singular's Gr\"obner base algorithm, which she knows to be very efficient.

In Section~\ref{sec:mitm} we recap the MitM paradigm.
MitM solutions consists of three parts: a central ontology, specifications of the abstract languages of the involved systems, and the distributed computation infrastructure that connects the systems via the ontology as an intermediate representation.
The rest of the paper develops these three parts for our case study:
In Section~\ref{sec:cgt}, we contribute a fragment to the MitM ontology that formalizes computational group theory.
In Section~\ref{sec:apit}, we specify the abstract languages of \GAP, \Sage, and \Singular and their relation to the ontology.
Finally, in Section~\ref{sec:case}, we present the resulting virtual research environment built on these systems in action.
Section~\ref{sec:concl} concludes the paper and compares MitM-based interoperability with other approaches.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "paper"
%%% End:

%  LocalWords:  sec:intro Sloane:oeis12,oeis mathbb Cremona:LMFDB16,lmfdb:on GAP:on \Sage:on singular:on DehKohKon:iop16 emph sec:mitm sec:cgt sec:apit sec:mitm_poc sec:concl MitM-based sec:case
%  LocalWords:  SageMath:on ldots,X_4 subseteq obner Groebner formalizations
