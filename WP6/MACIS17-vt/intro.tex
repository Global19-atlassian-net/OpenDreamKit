\section{Introduction}\label{sec:intro}

There are various large-scale sources of mathematical knowledge.  These include
\begin{compactitem}
\item generic information systems like the Wikipedia,
\item collections of informal but rigorous mathematical documents -- e.g. research libraries, publisher's ``digital libraries'', or the Cornell preprint arXiv,
\item literature information systems like zbMATH or MathSciNet,
\item databases of mathematical objects -- like the GAP group libraries, the Online Encyclopedia of Integer sequences (OEIS), and the L-functions and Modular Forms Database (LMFDB),
\item fully formal theorem prover libraries like those of Mizar, Coq, PVS, and the HOL systems.
\end{compactitem}
  
We will use the term \textbf{mathematical knowledge bases} to refer to them collectively and restrict ourselves to those that are available digitally.
They are very useful in mathematical research, applications, and education.  
Commonly these systems are only accessible via a dedicated web interface that allows humans to query or browse the databases. 
A programmatic interface, if it exists at all, is usually system specific, to use it, mathematicians need to be familiar both with the mathematical background and internal structure of the system in question.  
No predominant standard exists, and these interfaces usually only expose the low-level raw database content.
We claim that mathematicians desire a ``programmatic, mathematical API'' that gives access to the knowledge-bases programmatically via their mathematical constructions and properties. 
We focus on addressing this problem in this paper. 

For our implementation we interpret mathematical knowledge bases as \ommt theory graphs -- modular, flexi-formal representations of mathematical objects, their properties, and relations. 
This embedding gives us a common conceptual framework to handle different knowledge sources, and the modular and heterogeneous nature of \ommt theory graph can be used to reconcile differing ontological commitments of the knowledge sources with in this conceptual framework.

To cope with the scale of mathematical content collections we update \ommt theories to ``virtual theories'', which no longer limit the number of declarations. 
We update knowledge management algorithms in the \mmt system so that they can cope with theories that do not fit into main memory but directly deal with the underlying databases as backends, employing a modular system of codecs to bridge the gap between the database schema and the mathematical construction of objects.

This paper proceeds as follows: 
In Section~\ref{sec:mmtmitm} we give a short overview of \ommt theory graphs along with the Math-In-The-Middle approach developed in the \textsf{OpenDreamKit} project, our primary use-case for virtual theories. 
Section~\ref{sec:sota} disusses \lmfdb and its' interface as an example of a state-of-the-art Mathematical Database and Section~\ref{sec:vt} shows how it can be represented as a set of virtual theories. 
Section~\ref{sec:access} introduces a codec architecture that allows to access virtual theories at the sematnic/mathematical level and Section~\ref{sec:qmt} makes QMT queries aware of virtual theories. 
Section~\ref{sec:concl} concludes the paper.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "paper"
%%% End:

%  LocalWords:  sec:intro oeis lmfdb sagemath wrapfigure textwidth tikzpicture textbf compactitem zbMATH MathSciNet ommt ommt sec:mmtmitm sec:sota sec:vt sec:concl
%  LocalWords:  fig:classicalconnect LuzKoh:fsarfo16 DehKohKon:iop16 omdocmmt mechanized
%  LocalWords:  sec:access sec:qmt
