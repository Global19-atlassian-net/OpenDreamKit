If we ignore encoding issues, schema theories are straightforward: they contain one declaration of the same name for each field within an \lmfdb record. 
This specifies only the semantic type of each field and does not relate it to the MitM formalization.
To handle the encoding as a physical type, we annotate each declaration with the codec that the databases for the values of that field.
Moreover, to connect the schema theories to the MitM formalization, we additionally annotate each field with the corresponding property of elliptic curves from the MitM theory.
We can now understand the last unexplained parts of Fig.~\ref{fig:vtarch}.
\identifier{?implements} is the symbol used to annotate the metadatum, which MitM property a schema field corresponds to.
And \identifier{?codec} similarly annotates the codec to each field.

For example, the \identifier{degree} field implements the \identifier{curveDegree} property in the elliptic curve theory and uses the \identifier{StandardInt} codec.
Thus, the schema theories determine the entire relation between semantic and physical objects.

The database theory is a virtual theory and contains one declaration per \lmfdb record.
Given the URI of an object in the respective database, our \mmt backend for \lmfdb first retrieves the appropriate record from {\lmfdb} -- in the case of \identifier{11a1} this corresponds to retrieving the JSON found in Figure~\ref{fig:lmfdbexample}. 
Then, for each field, it uses the annotated codec (which is an \ommt expression) to build an actual codec (as a runnable Scala function) and runs its decoding function.
Next, it passes the resulting record to the \identifier{from\_record} constructor, which yields an elliptic curve in the MitM theories.
Finally, this elliptic curve is added as a new declaration in the database theory.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "report"
%%% End:

%  LocalWords:  sec:vt lmfdb ommt textit textit realized tikzpicture tabularx textwidth sec:access realizations emph wrapfigure vspace lstlisting lstinline
%  LocalWords:  hline hline rightarrow codectt mathbb multirow fig:codecs isogeny mathrm
%  LocalWords:  characterized noindent formalized fig:codecops plaintt plaintt begingroup
%  LocalWords:  pgfdeclarelayer pgfsetlayers background,foreground resizebox xscale ec
%  LocalWords:  4,yscale pgfonlayer tikzstyle red,dashed,thick withshadow draw,drop oding
%  LocalWords:  cylinder,cylinder 50,cylinder 0.25,draw none,fill 30,rounded 1cm,fit
%  LocalWords:  thy,interface ecschema draw,cloud,fit 4,withshadow,inner 4pt,purple
%  LocalWords:  mongodb dbtheory endgroup fig:vtarch colored colored colored colored
%  LocalWords:  fig:lmfdbexample textbf centering RabKoh:WSMSML13 sec:mmtmitm
%  LocalWords:  internalizes
