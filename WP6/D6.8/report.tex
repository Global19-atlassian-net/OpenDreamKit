\documentclass[book]{deliverablereport}
\usepackage[style=alphabetic,backend=bibtex]{biblatex}
\addbibresource{../../lib/kbibs/kwarcpubs.bib}
\addbibresource{../../lib/kbibs/extpubs.bib}
\addbibresource{../../lib/kbibs/kwarccrossrefs.bib}
\addbibresource{../../lib/kbibs/extcrossrefs.bib}
\addbibresource{../../lib/deliverables.bib}
\addbibresource{local.bib}
%\usepackage{local}
\usepackage[show]{ed}
\usepackage{stex-logo}
\usepackage{rotating}

\usepackage{tikz}
\def\thmo#1#2{\mathsf{#1}\colon\kern-.15em{#2}}% for theories
\usetikzlibrary{shapes,arrows,fit,shadows}
\usepackage{tikzinput}

\usepackage{../lib/florian_rabe/basics}
\usepackage{local}

\hypersetup{colorlinks}

\title{Curated Math-in-the-Middle Ontology and Alignments for GAP/SAGE/LMFDB}
\def\shorttitle{Curated MitM Ontology/Alignments}

\deliverable{dksbases}{lfmverif}
\deliverydate{1/07/2018}
\duedate{1/09/2018}

\author{John Cremona}
\author{Dennis M\"uller}
\author{Michael Kohlhase}
\author{Markus Pfeiffer}
\author{Florian Rabe}
\author{Nicolas Thierry}
\author{Tom Wiesing}

\begin{document}
\begin{abstract}
  This Report describes the Math-in-the-Middle (MitM) Ontology developed in the
  OpenDreamKit project. It serves as a reference and pivotal point for translations
  between the various input languages of mathematical software systems. 
\end{abstract}
\maketitle
%\newpage\strut\githubissuedescription
\newpage\tableofcontents\newpage

\section{Introduction}

The Math-in-the-Middle (MitM) Ontology developed in the OpenDreamKit project. It serves as
a reference and pivotal point for translations between the various input languages of
mathematical software systems. This integration and interoperability has been described
in~\cite{DehKohKon:iop16,WieKohRab:vtuimkb17,KohMuePfe:kbimss17} and -- in great detail --
in \cite{ODK-D6.5}. In a nutshell, the MitM Ontology describes the mathematical objects,
concepts, and their relations in a general, system-agnostic way in an OMDoc/MMT theory
graph while the mathematical systems export API theories that describe the system
interface language in terms of types, classes, constructors, and functions -- again in
OMDoc/MMT. These two levels of descriptions are linked by OMDoc/MMT
alignments~\cite{MueGauKal:cacfms17} that allow the translation of expressions in the
interface language of system $A$ into the MitM-induced language, and from there to the
interface language of system $B$~\cite{MueRoYuRa:abtafs17}.

The Math-in-the-Middle Ontology is hosted on the MathHub.info system
\url{http://mathhub.info}, the sources can be obtained from
\url{http://gl.mathhub.info}. As the MathHub front-end is currently undergoing major
re-write\footnote{The old MathHub interface was based on Drupal, which led to major system
  vulnerabilities and therefore maintenance hassles, because Drupal was targeted by
  hackers. We are currently working on a docker-based orchestration of services with a
  React.JS based front-end in the general spirit of the OpenDreamKit VRE toolkit; see
  \url{https://github.com/MathHubInfo/}. The new system can be accessed at
  \url{http://new.mathhub.info}.} we will reference the MitM ontology by its sources --
the semantically enhanced user interface can be accessed via the same URLs without the
\url{gl.} part.

The development consists of three parts:
\begin{compactenum}[\em i\rm)]
\item The MitM ontology is the centrepiece of this deliverable: it provides formalization of mathematical background theories relevant in OpenDreamKit.
\item The SMGloM Glossary has informal but semantically structured versions of the same content, and can therefore act as a human-readable documentation.
\item The system API theories for the OpenDreamKit systems and databases provide the alignment of concrete systems with the MitM ontology.
\end{compactenum}
We will discuss all three parts separately below.

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\section{The MitM Ontology}

\input{ontology}

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\section{The ``Semantic Multilingual Glossary of Mathematics'' (SMGloM)}\label{sec:smglom}

The SMGloM library is available at \url{https://gl.mathhub.info/smglom}. It contains
ca. 815 glossary modules (OMDoc/MMT theories) with more than 1700 concepts. All
represented in \sTeX, a semantic variant of {\LaTeX} developed by FAU and
JacU. Figure~\ref{fig:conductor} shows an example. The boldface words are definienda
(i.e. concepts to be defined; here ``conductor'') and the blue ones are concepts already
defined in other parts of the MitM Ontology. SMGloM definitions are multilingual -- mostly
English and German, but also some Romanian, Turkish, Arabic, and Chinese, and are
cross-linked on the concept level.

\begin{figure}[ht]\centering
  \fbox{\includegraphics[width=14cm]{conductor}}
  \caption{An \sTeX Definition of the Conductor of an Elliptic
    Curve}\label{fig:conductor}
\end{figure}


% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\section{System APIs Theories for OpenDreamKit Systems}

We have generated and cross-linked system APIs for the computer algebra systems GAP,
SageMath, and SINGULAR, they can be found at
\url{https://gl.mathhub.info/ODK/{GAP,Sage,Singular,lmfdb}}.

As an example, Figure~\ref{fig:cgtontology} sketches the alignments between the
computational group theory ontology from above and the constructors and operations of
\GAP.

\begin{figure}[ht]\centering
  \tikzinput[width=.98\textwidth]{alignmentimg}
  \caption{Alignments between the MitM Ontology and the \GAP API}\label{fig:cgtontology}
\end{figure}

\section{Evaluation \& Conclusion}\label{sec:concl}
Figure~\ref{fig:MitM-graph} shows an overview of the MitM ontology, together with the the
system APIs and the alignments (in red). We can directly see that the MitM ontology is
dwarfed the system API graphs. This is to be expected, since we have mainly covered the
background knowledge needed for the OpenDreamKit integration use cases;
see~\cite{ODK-D6.5}. This is in sync with the overall project plan, which mainly wants to
demonstrate the feasibility of the MitM approach to system integration, and expects the
main part of the MitM Ontology to be contributed by the mathematical community.

Most of the work in MitM Ontology has gone into the provisioning of a viable foundation
and basic set of types, which allow the flexiformalization and specification of
mathematical knowledge, objects, functions, and types in a system-independent/neutral way
that closely mirrors the presentation in the mathematical literature. The central focus
was in the naturalness and adequacy of the representation. The focus on a basic repertoire
of types inspired by mathematical practice goes a long way into this direction.

With CGT (computational group theory) we have shown that the MitM approach is feasible,
and that the investment into the extension of the MitM Ontology is commensurate with
writing good (mathematical) documentation. Indeed the MitM ontology together with the
system API alignments can be used for documentation purposes and complement it. Moreover, as
MitM representations are shared between systems by design, all systems participating in
the OpenDreamKit MitM-based integration scheme obtain this ``documentation'' for the cost
of alignments alone. 

Generally, we note that the investment necessary for adding mathematical functionality to
the MitM integration decreases with the size of the existing MitM ontology, and in the
limit becomes proportional to the size of the added functionality, while the amount of
system functionality yielded by MitM-compatible systems increases proportionally with the
MitM size. Already with four systems GAP, Sage, Singular, and LMFDB; see ~\ref{ODK-D6.5}
we have reached a size where investments into extending the MitM ontology are starting to
pay off, and interest of the computational mathematics is generated. We expect that once
the heavy lifting of getting the framework and a seed MitM Ontology has been done, that
the integration framework and MitM Ontology coverage will grow organically.x

\begin{figure}\centering
  \fbox{\begin{sideways}\includegraphics[width=.95\textheight]{MitM-graph}\end{sideways}}
%  \fbox{\includegraphics[width=.95\textwidth]{MitM-graph1}}
  \caption{The MitM Theory Graph}\label{fig:MitM-graph}
\end{figure}
\printbibliography 
\end{document}

%%% Local Variables:
%%% mode: visual-line
%%% fill-column: 5000
%%% mode: latex 
%%% TeX-master: t
%%% End:

%  LocalWords:  maketitle newpage tableofcontents newpage newcommand xspace ednote mathdb
%  LocalWords:  standardize dktheories concl printbibliography pn textit mmt mitm emph
%  LocalWords:  WPref dksbases prioritized taskref organized delivref dkstheories textbf
%  LocalWords:  githubissuedescription MueGauKal:cacfms17 MueRoYuRa:abtafs17 compactenum
%  LocalWords:  DehKohKon:iop16,WieKohRab:vtuimkb17,KohMuePfe:kbimss17 formalization fbox
%  LocalWords:  texttt subtyping flexary smglom stabilizes formalizations centering
%  LocalWords:  includegraphics fig:condutor textheight fig:cgtontology textwidth
%  LocalWords:  alignmentimg flexiformalization
