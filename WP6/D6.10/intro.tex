This report summarizes the achievements in Work Package 6 over the last year of the OpenDreamKit project: By oversight the title in the grant agreement has not been updated. Concretely, this report reports on the results of WP6T10: Math Search Engine and WP6T11: Isabelle Case Study and tasks T6-8 (case studies in mathematical data sets). 

In the last year, significant progress has been made in four areas: 
-  the understanding of D/K/S-bases: we have codified the experiences in the OpenDreamKit project into a tetrapodal view on "doing mathematics", which extends the Data/Knowledge/Software model of the proposal by "narration" and  "organization" aspects. 
-  the Knowledge (K) aspect, where we have developed an exporter from library the Isabelle Theorem prover (Archive of Formal Proof) to an extensive RDF triple store, which can be queried by standard SPARQL queries for semantic search. 
- the data (D) aspect, where we have 
  * developed an both an innovative model of (deep) FAIR in mathematics (and have integrated it with the MitM paradigm developed in OpenDreamKit),  
  * have implemented in a prototypical system (data.mathhub), and have
  * evaluated it on the mathematical community outside the core OpenDreamKit community. 
- computational mathematical documents (the S aspect of D/K/S or the "narration" and "computation" aspects of the finer tetrapod model). Here we have developed a formula harvester for jupyter notebooks and a formula search engine that builds on them (as envisioned in task T10 of WP6).



\paragraph{Mathematical Libraries}
% Innovations based on mathematical knowledge and algorithms yield many improvements in science, engineering, economy, ecology, health care, security, and society overall. 
% For example, our global positioning system (GPS) needs the mathematics of relativistic physics, our mobile phones use frequencies allocated through combinatorial optimization, the combinatorics of our genome yields clues to curing rare diseases, the privacy of our communications depends on cryptographic protocols steeped in number theory, and our national security is relying on the mathematical analysis of increasingly complex networks. 
% Fundamental mathematical research and its direct application in practical situations enable many engineering, science, and business innovations that enrich society and mankind.\ednote{FR: throw out this paragraph? Or replace with one sentence?}

Modern mathematical research increasingly depends on collaborative tools, computational environments, and online databases, and these are changing the way mathematical research is conducted and how it is turned into applications.
For example, engineers now use mathematical tools to build and simulate physical models based on systems of differential equations with millions of variables, combining building blocks and algorithms taken from libraries shared all over the internet.

Traditionally, mathematics has not paid particular attention to the creation and sharing of data --- the careful computation and publication of logarithm tables is a typical example of the extent and method.
This has changed with the advent of computer-supported mathematics, and the practice of modern mathematics is increasingly data-driven.
Today it is routine to use mathematical datasets in the Gigabyte range, including both human-curated and machine-produced data.
Examples include the L-Functions and Modular Forms Database (LMFDB; $\sim 1$ TB data in number theory)~\cite{Cremona:LMFDB16,lmfdb:on} and the GAP Small Groups Library~\cite{GapSmallGroups:on} with $\sim 450$ million finite groups.  
In a few, but increasingly many areas, mathematics has even acquired traits of experimental sciences in that mathematical reality is ``measured'' at large scale by running computations.

There is wide agreement in mathematics that these datasets should be a common resource and be open and freely available.
Moreover, the software used to produce them is usually open source and free as well.
%While FAIR does not necessarily mean Open~\cite[2.3]{FAIR}, the appropriate Openness for almost all mathematical data is indeed open source and free.
Such an ecosystem is embraced by the mathematics community as a general vision for their future research infrastructure~\cite{NAS14}, adopted by the International Mathematical Union as the Global Digital Mathematics Library initiative \cite{GDML:on}.

To better understand the scale of the problem, Figure~\ref{fig:datasets} gives an overview over some state-of-the-art libraries.
Here we already use the division into four kinds of mathematical data that we will develop in Section~\ref{sec:fair}.

\begin{figure*}[htp]\centering\small\def\cite#1{}
  \begin{tabular}{| p{.35\textwidth} | p{0.55\textwidth}|}\hline
  Dataset & Description \\\hline\hline
  \multicolumn{2}{|l|}{\textbf{Symbolic Knowledge}} \\\hline
  Theorem prover libraries \cite{OAFproject:on}  & $\approx 5$ proof libraries, $\approx 10^5$ theorems each, $\approx 200$ GB \\\hline
  Computer algebra systems \cite{sagemath} & e.g., SageMath distribution bundles $\approx 4$ GB of various tools and libraries\\\hline
  Modelica libraries \cite{Modelica:on} &$> 10$ official, $> 100$ open-source, $\approx 50$ commercial,
      $> 5.000$ classes in the Standard Library, industrial models can reach $.5$M equations \\\hline
  \multicolumn{2}{|l|}{\textbf{Relational Data}} \\\hline
 Integer Sequences \cite{OEIS:on} & $\approx 330$K sequences, $\approx 1$ TB  \\\hline
 Sequence Identities \cite{kwarc:datahost:on} & $\approx .3$M sequence identities, $\approx 2.5$ TB \\\hline
 Highly symmetric graphs, maps, polytopes \cite{ConderCensuses:on, HartleyPolytopes:on, LeemansPolytopes:on, PotocnikCensuses:on, RoyleVT:on, WilsonET:on} & $\approx 30$ datasets, $\approx 2\cdot10^6$ objects, $\approx 1$ TB \\\hline
  Finite lattices \cite{KohLat:on, LeeLat:on, MalLat:on} & $7$ datasets, $\approx 17 \cdot 10^9$ objects, $\approx 1.5$ TB \\\hline
  Combinatorial statistics and maps \cite{findstat} & $\approx1.500$ objects \\\hline
  SageMath databases \cite{SageDB:on} & $12$ datasets \\\hline
  $L$-functions and modular forms \cite{lmfdb:on} & $\approx 80$ datasets, $\approx 10^9$ objects, $\approx 1$ TB \\\hline
  \multicolumn{2}{|l|}{\textbf{Linked Data}} \\\hline
   zbMATH \cite{zbMATH:on} & $\approx 4$M publication records with semantic data, $\approx 30$M reference data, $>1$M disambig. authors, $\approx 2,7$M full text links: $\approx 1$M OA \\\hline
  swMATH \cite{swMATH:on} & $\approx 25$K software records with $> 300$K links to $> 180$K publications \\\hline
  EuDML  \cite{EuDML:on} & $\approx 260$K open full-text publications \\\hline
  Wikidata  \cite{wikidata:on} & $34$ GB linked data, thereof about $4$K formula entities, interlinked, e.g., with named theorems, persons, and/or publications \\\hline
  \multicolumn{2}{|l|}{\textbf{Narrative Data}} \\\hline
  arXiv.org & $\approx 300$K math preprints (of $\approx1.6$M) most with {\LaTeX} sources\\\hline
  EuDML  \cite{EuDML:on} & $\approx 260$K open full-text publications, digitized journal back issues \\\hline
  MathOverFlow & $\approx 1,1$M questions/answers, $\geq11$K answer authors \\\hline
  Stacks project & $\geq 6000$ pages, semantically annotated, curated, searchable textbook \\\hline
  nLab & $\geq 13$K pages on category theory and applications\\\hline
\end{tabular}
  \caption{Summary of mathematical libraries}\label{fig:datasets}
\end{figure*}

\ednote{add the collection used for the jupyter notebooks to the table}

We present a uniform infrastructure for sharing, finding, and searching mathematical libraries of any kind.
Moreover, we seed this infrastructure with a collection of representative libraries (all of them state of the art and large) as described below.

\paragraph{Formal Knowledge Bases}
For many decades, the development of a universal database of all mathematical knowledge, as envisioned, e.g., in the QED manifesto \cite{qed}, has been a major driving force of computer mathematics.
Today a variety of such libraries are available.
These are most prominently developed in proof assistants such as Coq \cite{coq} or Isabelle \cite{isabelle} and are treasure troves of detailed mathematical knowledge.
However, despite the enormous potential for many applications of and in virtual research environments, this treasure is usually locked into system- and logic-specific representations that can only be understood by the respective theorem prover system.
For example, this precludes applications such as finding related object in knowledge bases from within computation-oriented systems as used in OpenDreamKit.

Therefore, we have developed interface standards that allow maintainers of formal libraries to make their content available to outside systems.
In this deliverable, we report on complementing our existing OMDoc/MMT standard for representing entire knowledge bases with a new Upper Library Ontology (ULO).
ULO is a standard ontology for exchanging high-level information about mathematical libraries that systematically abstracts all symbolic knowledge away and only retain what can be easily represented relationally.
That allows for semantic web-style representations, for which simple and standardized formalisms such as OWL2 \cite{w3c:owl2-xml}, RDF \cite{rdf}, and SPARQL~\cite{w3c:SPARQL-Rec:13} as well as highly scalable tools are readily available.
While it is well-known that ontology language--based relational formalisms are inappropriate for symbolic knowledge like formulas, algorithms, and proofs, it is this high-level information that is often critical important for integration into virtual research environments, e.g., to realize benefits like search.

We report on this in Section~\ref{sec:knowledge}.
The bulk of this section is taken by a report on a new task (D6.11) \ednote{maybe insert taskref} that we have added to \pn.
In this task, we export the large Isabelle knowledge bases \ednote{insert size estimate} as both OMDoc/MMT and ULO format.
We show the utility of the generated ULO data by setting up a relational query engine that provides easy access to certain library information that was previously hard or impossible to determine.

\paragraph{Relational Datasets}
Many mathematical datasets take the form of large SQL/CSV--style datasets that enumerate all or a selection of interesting objects satisfying certain properties, e.g., all finite groups up to a certain size.
These can be produced in bulk or grow from individual user submissions.

They are generally produced, published, and maintained with virtually no systematic attention to the FAIR principles~\cite{FAIR,WilDumAal:FAIR16} for making data findable, accessible, interoperable, and reusable.
In fact, often the sharing of data is an afterthought --- see~\cite{Bercic:cmo:wiki} for an overview of mathematical datasets and their ``FAIR-readiness''.

Moreover, the inherent complexity of mathematical data makes it very difficult to share in practice: even freely accessible datasets are often very hard or impossible to reuse, let alone make machine-interoperable because there is no systematic way of specifying the relation between the raw data and its mathematical meaning. 
Therefore, unfortunately FAIR mathematical datasets essentially do not exist today.

\paragraph{Mixed Computational and Narrative Documents}
\ednote{write summary here, explain selection of example6}

\paragraph{Acknowledgments and Prior Dissemination}
Task D6.10 \ednote{insert task ref} was carried out as a subcontract by Makarius Wenzel.
Some parts of Section~\ref{sec:isabelle} are adapted from his descriptions of his work in the context of this subcontract.

This work has been published as \ednote{cite ULO paper} for ULO.\ednote{add other papers}
The export facilities of Isabelle and the integration with MMT have been integrated with Isabelle in its June 2019 release.
It was reported on in two blog posts by Wenzel%
\footnote{\url{https://sketis.net/2018/isabelle-mmt-export-of-isabelle-theories-and-import-as-omdoc-content}, and \url{https://sketis.net/2019/mmt-as-component-for-isabelle2019}}
and a paper is forthcoming.

%%% Local Variables:
%%% mode: latex
%%% mode: visual-line
%%% fill-column: 5000
%%% TeX-master: "report"
%%% End:
