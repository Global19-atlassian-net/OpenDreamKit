  \subsubsection{WorkPackage 6:  Data/Knowledge/Software-Bases}
  \label{dksbases}
%Explain, task per task, the work carried out in WP during the reporting period giving details of the work carried out by each beneficiary involved.


  \TODO{Update for Reporting Period 2}

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \paragraph{Overview}

  In a series of workshops (September 2015 in Paris, January 2016 in St. Andrews, June
  2016 in Bremen, and July 2016 in Bia{\l}ystok) the participants working on
  \WPref{dksbases} met and discussed the topic of integrating the \pn systems into a
  mathematical VRE toolkit.  Key results were
  \begin{compactitem}[\bf R1.]
  \item the observation that \emph{knowledge-aware interoperability of software and
      database-systems is the most critical objective} for \WPref{dksbases} in the \pn
    project.
  \item the consensus that this can be achieved by \emph{aligning the mathematical
      knowledge underlying the various systems}.
  \end{compactitem}
  This requires explicitly representing the three aspects of math VREs -- Data (D),
  Knowledge (K), and Software (S) -- and basing computational services and inter-system
  communication on a joint \DKS-base. These results are engrained in the
  ``Math-in-the-Middle'' (MitM) paradigm~\cite{DehKohKon:iop16}, which gives a
  representational basis for specification-based interoperability of mathematical software
  systems -- so that they can be integrated in a VRE toolkit. In the MitM paradigm, the
  mathematical knowledge underlying the VREs (K) and the interface for each
  system (S) are represented as modular theory graphs in the OMDoc/MMT format. For the
  data aspect (D) we have extended the concept of OMDoc/MMT theories to ``virtual
  theories'' that allow the practical management of possibly infinite theories,
  see~\cite{ODK-D6.2} for details.

  A side effect of \textbf{R1.} is that the verification aspects anticipated in the
  proposal are non-critical to the \pn project. In particular the value of the exemplary
  verification of an LMFDB algorithm in \taskref{dksbases}{data-LMFDB} and
  deliverable~\longdelivref{dksbases}{lfmverif} seems highly questionable.

  Correspondingly we have refined the notion of ``triformal theories'' coined in the
  proposal into the concept of ``\DKS theory graphs'', which can be formalized and
  implemented without the extension of OMDoc/MMT for ``biformal theories'' anticipated in
  the proposal.

  Through the concerted effort of the WP6 participants, we have been able to implement
  this design into prototypical \DKS base patterned after the MitM paradigm with virtual
  theories, generating interface theory graphs for the \GAP and \Sage systems and
  integrating the \LMFDB system via the MitM codec architecture described
  in~\cite{ODK-D6.2}. Based on this, we were able to generically integrate \GAP, \Sage,
  and \LMFDB via the standardised SCSCP protocol~\cite{HorRoz:ossp09} -- essentially
  remote procedure calls with OpenMath Objects. This case study shows the feasibility of
  the initial design of \DKS-bases; further investigations and the integration of
  additional systems will determine the practicability.

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \paragraph{Milestones}

  \subparagraph{\longmilestoneref{dksbases-interop1}}
  \emph{“User story: thanks to a fully functional prototype integrating of
    at least the systems \GAP, \Sage, \Singular, and \LMFDB via the
    \SCSCP Protocol, end users shall be able to run calculations
    involving any combination of those systems from any of them. This
    prototype will be the basis for integration work for additional
    systems and the user interface from WP4.”}

  \subparagraph{\longmilestoneref{dksbases-interop2}}
  \emph{“The goal of this milestone is to take into account all the operational
    experiences with the first prototype and add more systems and integrate some
    of the UI components from WP4. The experiences with the preparation of
    this prototype will allow us to estimate the joining costs of adding a system
    to the OpenDreamKit VRE toolkit, which is an important measure of the
    flexibility of the Math-In-the-Middle approach.”}

  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \paragraph{Tasks}

  \subparagraph{\longtaskref{dksbases}{data-assessment}}
  This task was directly addressed in the \WPref{dksbases} workshops in the first year.

  \subparagraph{\longtaskref{dksbases}{data-triform}}
  For this task we have specified and implemented the concept of virtual theories that can
  contain large -- theoretically even infinite -- numbers of declarations and objects
  (e.g. 3.5M declarations in the LMFDB data base for elliptic functions) in
  OMDoc/MMT. Virtual theories are characterized by the fact that they are too large to
  keep in main memory of the MMT System and have to be partially and lazily imported from
  an external data store. We have reported on the results in \longdelivref{dksbases}{design}.

  \subparagraph{\longtaskref{dksbases}{data-design}}
  This task was directly addressed in the \WPref{dksbases} workshops in the first year and
  has led to the design and implementation in \delivref{dksbases}{design}. The design has
  been published at an international conference (CICM 2016) and is now being implemented.

  \subparagraph{\longtaskref{dksbases}{data-foundationCAS}}
  In the course of the deliberations in the \WPref{dksbases} workshops we saw a shift from
  the development of computational foundations and verification towards API/Interface
  function specifications to enable semantic system interoperability via the
  Math-in-the-Middle Ontology. Consequently, emphasis has changed to the generation of API
  Content Dictionaries (API CDs) for \GAP, \LMFDB and \Sage. We have a prototypical set
  of \GAP and \Sage Content Dictionaries in OMDoc/MMT form (\GAP: 218 CDs, 2996 entries;
  \Sage: 512 CDs, 2800 entries overall). The computational foundations exist but are rather
  more simple than originally anticipated. Much of the functionality has been offloaded to
  the SCSCP standard -- remote procedure call with OpenMath representations of the
  mathematical objects -- developed in the SCIENCE Project. As a direct consequence of the
  work in \pn the OpenMath Society has promoted the \SCSCP protocol into as an OpenMath
  Standard.

  Conversely, the \GAP and \Sage CDs are rather more elaborated than anticipated in the
  proposal, and thus form a viable basis for alignment with the MitM Ontology.

  \subparagraph{\longtaskref{dksbases}{research-categories}}
  This task has just started, and the MitM architecture developed in \WPref{dksbases} has
  given important impulses to make the code infrastructure of \Sage and \GAP more
  declarative (knowledge-based). In \Sage, the category infrastructure was validated (it
  seems to be the right level of abstraction to generate API CDs) and extended; further
  annotations were added into the \Sage code base and accepted by the
  community. % TODO: not yet
  In \GAP,
  the facilities for ``constructors'' was reformed, extended by an infrastructure for
  documentation and static typing/type analysis, and the code base refactored for 6000
  constructors. Similarly, the online documentation subsystem for \GAP has been regularized
  and synchronized with the constructor level. Already at this early stage of the task the
  new ``knowledge-based perspective'' has revealed a plethora of errors and inefficiencies
  and has contributed to the code quality in both systems.

  \subparagraph{\longtaskref{dksbases}{data-OEIS}}
  For the OEIS case study we have parsed the OEIS data and converted it into OMDoc/MMT
  theories (ca. 260,000). The main problem solved here was to parse the formula section
  (generating functions, relations between sequences, \ldots): they are represented in a
  human-oriented ASCII syntax, which is highly irregular, ill-separated from surrounding
  text, and interpunctuation. Nonetheless we managed to recover ca. 90\% of the formulae
  and
  \begin{compactenum}[\em i\rm)]
  \item generate ca. 100,000 new relations between sequences and
  \item provide a package of ca. 50,000 generating functions to Sage (which can be used
    e.g. in the FindStat database).
  \end{compactenum}
  We use this theory set to test the functionalities of ``virtual theory graphs'' (one
  step up from the ``virtual theories'' developed in \taskref{dksbases}{data-design}).

  \subparagraph{\longtaskref{dksbases}{data-findstat}}
  Not applicable for this period

  \subparagraph{\longtaskref{dksbases}{data-LMFDB}}
  Work on this task has started. Given the concept of virtual theories developed in
  \taskref{dksbases}{data-triform} the task is to build a database connector that converts
  the MongoDB tables in LMFDB into ``mathematical objects''.  We have identified the
  problems -- e.g. that objects are reduced to ad-hoc database records: for instance
  elliptic curves are represented as a quadruple of integers, where the last is
  represented as a string of digits as the range of MongoDB integers is too small. We have
  developed an architecture of language-specific Codecs which mitigate these problems in a
  knowledge-centered way (Codecs are OMDoc/MMT objects) that interpret database records as
  OMDoc/MMT objects and can thus be used populate virtual theories.  The next step is to
  extend the existing MMT query language by a query compiler into the underlying data
  store system; concretely to MongoDB underlying LMFDB for \taskref{dksbases}{data-LMFDB}.

  \subparagraph{\longtaskref{dksbases}{data-memo}}
  Not applicable for this period

  \subparagraph{\longtaskref{dksbases}{mws}}
  Work on the first work phase has proceeded as planned and has culminated in
  \longdelivref{dksbases}{mws}. The second work phase on this task presupposes the
  Math-in-the-Middle ontology (as we call it now.) Where we already have that, e.g. for
  the OEIS (see \taskref{dksbases}{data-OEIS}) we already have a running search
  engine. The main problem here is to devise intuitive query interfaces and integrate them
  into the \pn VRE framework.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "report"
%%% End:
