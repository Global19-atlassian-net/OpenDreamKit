\section{Examples of In-Situ Computation}\label{sec:examples}

In the following we will look at some examples to get a feeling for the applications.

\subsection{Unit Conversions}\label{sec:units}
Reading documents which contain units that one is not familiar with, can be an annoying
task, especially when uncommon units, such as solar masses or fortnights, occur in the
document or when a document is written in a system of measurement different from the one
the reader is used to.  Of course, a google query or a similar service can be used to
convert units, but this requires the reader to leave his document for another application,
which in turn leads to a loss of focus and overall productivity.  This can be averted by
in-situ computation. Moreover, in contrast to existing unit conversion services, in-situ
computation can also convert all expressions in a document -- without noticeable effort
for the user and without productivity loss.


\subsection{Exploring Equations}\label{sec:equations}

A common example of in-situ computation is the exploration of mathematical models that are
given as equations. In the simplest case, this can be equations like Einstein's
mass-energy equivalence (\ref{f:emc2}) -- which we will use as a running example -- and in
other cases, this can be complex models like van Roosbroeck's models for drift and
diffusion of electrons and holes in semiconductor devices~\cite{FarRotDoa:nmddm16}\footnote{We
  are currently studying this model, formalizing the inherent knowledge and augmenting
  (parts of) \cite{FarRotDoa:nmddm16} into an active document, see~\cite{KohKopMueTab:RCS} for
  first results. The methods reported on here will eventually be employed in this case
  study, which itself is beyond the scope of this deliverable report}, which comprises
partial differential equations, boundary conditions, and physical constants -- a much more
complex situation, but the possible interactions are essentially the same. 

So let us come back to our running example: The equation for mass-energy equivalence is
simple:

\begin{equation}\label{f:emc2}
  E=mc^2
\end{equation}

where $E$ is the energy, $m$ is the mass, and $c$ is the speed of light. It appears in
many documents, e.g. the Wikipedia article in Figure~\ref{fig:emc2-wikipedia}. In such a
document -- were it active -- a scholar or interested layman might be interested to see
what the energy equivalent of one gram of matter might be. Today a google query reveals a
custom-made answer at~\cite{Odenwald:q388}, but really our scholar would like to just right
click on the symbol $m$ in $\ref{f:emc2}$, instantiate it to $1g$ and have the document
\emph{simplify the changed expression} (in-situ computation) to give the answer.

Conversely, she might want to know how what mass it would take to drive e.g. from Erlangen
to Paris in a Tesla (which gets 6.25 km per kWh)\footnote{This is a natural and common
  question; see~\cite{RT:emc2} which computes the mileage a car would get out of a 1/16
  inch drop of water -- the value it comes up with is 96.000 miles.}. Here she would like
to just instantiate $E$ with $776 \times 6.25=4850$ kWh and the document \emph{solves the
  equation $4850=mc^2$ for $m$}.\ednote{MK: maybe do the computation and report the
  result} Of course, the result is so minuscule that she wants to have it changed to a
form she understand, e.g. the number of carbon atoms that weigh as much.

\begin{figure}\centering
  \begin{boxedquote}
    In physics, massâ€“energy equivalence states that anything having mass has an equivalent
    amount of energy and vice versa, with these fundamental quantities directly relating
    to one another by Albert Einstein's famous formula:

    \[E=mc^2\] 

    This formula states that the equivalent energy ($E$) can be calculated as the mass ($m$)
    multiplied by the speed of light ($c$ = about $3\times10^8 m/s$) squared.
  \end{boxedquote}
  \caption{From the Mass-Energy-Equivalence page at Wikipedia~\cite{WP:emc2}}
  \label{fig:emc2-wikipedia}
\end{figure}

Of course, the computations themselves in our example are rather simple, and can be
executed by any computer algebra system, and even complex examples like the van Roosbroeck
models alluded to above would tax modern systems exceedingly, indeed they are the kind
computations that are carried out and documented in Jupyter notebooks. 

The point here is that the envisioned in-situ computation service allows computation
without changing to another system and avoids errors (data entry errors and data
interpretation errors) induced by crossing system borders.

\subsection{Hypothetical Computations Playing with Constants}\label{sec:hyp}

In the previous example, we only explored the equation by instantiating the variables (we
are free to do so, since they are `universal', i.e. the equation holds for all $E$ and
$m$). The `constant' $c$ is a different beast, it has a globally fixed value:
$299\, 792\, 458\;m/s$. In principle, we could instantiate such `constants' as well,
e.g. to answer the questions like `What would the word described in the paper look like
if the speed of light were $88 \text{mph}$?' This kind of hypothetical computations are
quite common e.g. in Physics, where some of the `constants' -- not the speed of light,
but e.g. the proton decay (half-life of protons), which is a `constant' of unknown
magnitude (with various theories projecting values between $10^{28}$ and $\infty$). Apart
from the fact that playing with `constants' essentially switches between `alternative
worlds', in-situ computation remains as useful as the instantiation of `universal
variables' from the last section.

A variant of the `constants' case is the case of `existential variables', which are
introduced by declarations like ``\emph{for some}''. In essence `existential variables'
behave like `constants' in that they should not be substituted for and have a fixed value
-- albeit an unknown one. Indeed we can generalize equation (\ref{f:emc2}) to
``\emph{There is a velocity $c$, such that $E=mc^2$.}'' without changing much of the
physical reality -- only that it becomes more permissible to experiment with concrete
values. 

In fact, often `constants' are not constant after all, for instance the value
$c=299\, 792\, 458\;m/s$ only holds for photons in vacuum, with other values for other
media -- including values near $88\text{mph}$ in exotic materials like Bose-Einstein
condensates. Here, light speed becomes a function of the medium, and we have a ``hidden
parameter'' to the equation, which comes into play in in-situ computation. We will not
consider existential variables and functional dependencies in this report and leave the
interfaces to future research.

\subsection{Updating Values to Current or Historical Values}

Additionally to the ``computation with hypothetical values'' discussed above, we often
want to compute with ``current or historical values'', for time-dependent
phenomena. Documents become much more useful, if they can adapt values via in-situ
computation. Examples uses would be e.g. papers on global warming that adapt to the
present state of the art with newer models or data, another is the tongue-in-cheek query
``Does it snow in hell?'' to Wolfram alpha~\cite{WolframAlpha:on}, which interprets it to
be a meterological query about the town of Hell, Norway, and the answer varies with the
weather there -- 0$^\circ$C and rain at the time of writing this report. 

There are many special-purpose documents that can already do that, though the mechanisms
are largely special-purpose. Stock ticker widgets are inserted into news web pages, and
weather apps supply the ``current weather'' in travel guides. But none of these allow
computation with the values. An exception to this are (some) spreadsheets players that
allow linking data cells to live feeds; with this spreadsheets -- a well-understood form
of special-purpose active documents -- can do in-situ computation with live data feeds.

But there is also a case to be made for general documents with in-situ computation:
Consider the case of the expression ``\emph{five gold doubloons}'' used by Adam Smith in
an intuition-building example in his seminal book ``Wealth of Nations'' from
1776~\cite{Smith:WoN1776}. The example cannot be understood by today's readers, unless
they have an intuition about the comparative magnitude of this monetary -- which was clear
to contemporary readers. Indeed the example changes meaning depending on whether
``\emph{five gold doubloons}'' buy a simple meal, a fine riding horse or a mansion. Here,
an in-situ ``computation'' that explains their relative purchasing power would be
extremely helpful for scholars and politicians (who love to quote Smith).

\subsection{Computation with Document and Content Structure}

In semantic documents we often have access to the dependency relation between document
fragments -- in the document itself and to other documents and the content commons. This
can be used to compute new document structures. A striking example is the computation of
guided tours for any concept in the document. A \textbf{guided
  tour}~\cite{KohDavGin:psewads11} is a document that is 
\begin{compactitem}
\item \textbf{self-contained} -- it builds on the (estimated) knowledge of the reader 
\item \textbf{dependency-ordered} -- it introduces new concepts only when all prerequisites are
  already introduced before or assumed to be known
\item \textbf{goal-directed} -- it introduces the goal concept
\item \textbf{minimal} in some form -- in the class of documents satisfying the three
  aspects above.
\end{compactitem}
Other conditions (e.g. the existence of examples and practice/self-evaluation problems)
may be added for special classes of guided tours.

Given an active document in the form described in Figure~\ref{fig:activedocs}, we can
compute guided tours from the document itself (e.g. by adding an ``explain'' option to the
right-click menu of technical terms.)

\subsection{Computation with Proofs}

Scientific, legal, and policy documents often involve complex argumentations for or
against certain statements.In the first categories, the argument can often take the form
of -- or at least approach -- proofs. In the area of study of the \pn project --
Mathematics -- arguments are usually quite literally proofs. These are notoriously
difficult to convey, since proofs depend on the user's mathematical
literacy~\cite{IanKoh:mlkmim15}, familiarity with the concepts/facts involved, and the
proof techniques. ``Proofs'' as they are published in mathematic are an attempted best fit
to the expected literacy and familiarity of an assumed average reader. In active documents
we can (as in the guided tours above) adapt to the ``real reader'' either pre-emptively or
by user interaction. This involves computation -- which is best integrated as in-situ
computation, .eg.  
\begin{itemize}
  \item calling automated theorem provers on a goal in a document
  \item extending the level of explanation by doing that on a subgoal or deepening the
    level of explanation. E.g. from ``obviously'' to a full proof.
  \end{itemize}






%%% Local Variables:
%%% mode: latex
%%% TeX-master: "report"
%%% End:

%  LocalWords:  sec:examples sec:units sec:equations f:emc2 Roosbroeck's Kopruckietal
%  LocalWords:  formalizing KohKopMueTab:RCS fig:emc2-wikipedia Odenwald:q388 emph infty
%  LocalWords:  RT:emc2 centering boxedquote WP:emc2 Roosbroeck Jupyter itemize sec:hyp
%  LocalWords:  FarRotDoa:nmddm16 textbf KohDavGin:psewads11 compactitem fig:activedocs
